````markdown
# Plan: Implement Distinct Color Scheme

## Chosen Approach (One‑liner)

Define the new, accessible color palette using CSS custom properties in `globals.css` as the single source-of-truth, map these variables within the Tailwind CSS configuration, ensuring WCAG AA compliance for both light and dark modes.

## Architecture Blueprint

- **Modules / Packages**

  - `app/globals.css`: Defines all base color CSS variables (e.g., `--background`, `--foreground`, `--primary`, `--primary-foreground`, `--secondary`, `--accent`, `--destructive`, `--muted`, `--border`, `--input`, `--ring`, `--card`, `--popover`) using HSL or Oklch values for both light (`:root`) and dark (`.dark`) modes. This is the canonical source of color values.
  - `tailwind.config.mjs`: Extends the Tailwind theme (`theme.extend.colors`) by mapping semantic color names (e.g., `primary`, `secondary`, `background`) to their corresponding CSS variables defined in `globals.css` (e.g., `primary: { DEFAULT: 'hsl(var(--primary))', foreground: 'hsl(var(--primary-foreground))' }`). Acts as the bridge between CSS variables and Tailwind utility classes.
  - `components/ui/*`: Shadcn UI components consume the Tailwind utility classes, which resolve to the CSS variables. No direct changes anticipated unless default component styling needs adjustment beyond theme variables.
  - `components/*` & `app/**/*.tsx`: Application-specific components use Tailwind utility classes (e.g., `bg-primary`, `text-foreground`) derived from the theme. May require updates if hardcoded colors or non-semantic classes were used previously.
  - `docs/colors.md` (New): Markdown file documenting the color palette, semantic roles, accessibility contrast ratios, and usage guidelines.

- **Public Interfaces / Contracts**

  - **CSS Variables:** The set of `--*` variables defined in `globals.css` for light and dark modes constitutes the primary color contract.

    ```css
    /* Example in globals.css */
    :root {
      --background: 0 0% 100%; /* Light mode background HSL */
      --foreground: 222.2 84% 4.9%; /* Light mode text HSL */
      --primary: 222.2 47.4% 11.2%; /* Light mode primary HSL */
      /* ... other light mode variables ... */
    }

    .dark {
      --background: 222.2 84% 4.9%; /* Dark mode background HSL */
      --foreground: 210 40% 98%; /* Dark mode text HSL */
      --primary: 210 40% 98%; /* Dark mode primary HSL */
      /* ... other dark mode variables ... */
    }
    ```

  - **Tailwind Color Utilities:** Semantic classes generated by Tailwind based on `tailwind.config.mjs` (e.g., `bg-primary`, `text-secondary-foreground`, `border-border`, `ring-ring`). These are the intended way components consume colors.

- **Data Flow Diagram**

  ```mermaid
  graph TD
      A[1. Define Palette & Verify Contrast] --> B[2. Update globals.css (CSS Vars)];
      B --> C[3. Verify tailwind.config.mjs (Mapping)];
      C --> D[4. Tailwind Build Process];
      D --> E[5. Components Use Tailwind Classes];
      E --> F[6. Browser Renders UI];
      A --> G[7. Document in docs/colors.md];

      style A fill:#f9f,stroke:#333,stroke-width:2px
      style B fill:#ccf,stroke:#333,stroke-width:2px
      style C fill:#ccf,stroke:#333,stroke-width:2px
      style D fill:#9cf,stroke:#333,stroke-width:2px
      style E fill:#9cf,stroke:#333,stroke-width:2px
      style F fill:#9c9,stroke:#333,stroke-width:2px
      style G fill:#fcf,stroke:#333,stroke-width:2px
  ```
````

- **Error & Edge‑Case Strategy**
  - **Inaccessible Contrast:** Color pairs fail WCAG AA. Mitigation: Mandatory contrast checks using tools (e.g., WebAIM, Polypane, DevTools) during color definition (Step 1) and verification (Step 2). Automated tests (Step 8) should ideally check key pairs. Iterate on HSL/Oklch values until compliant _before_ finalizing definitions.
  - **Inconsistent Application:** Some elements retain old colors or don't use semantic classes. Mitigation: Thorough manual visual review (Step 7) across all pages/components/states in both modes. Use browser dev tools to inspect computed styles and trace back to CSS variables. Code audit (grep) for hardcoded colors.
  - **Incorrect CSS Variable Definition:** Typo in variable name or malformed HSL/Oklch value. Mitigation: Careful review of `globals.css`. Browser console errors often indicate syntax issues. Visual inspection reveals incorrect colors.
  - **Tailwind Mapping Error:** Tailwind classes don't map correctly to CSS variables. Mitigation: Verify `tailwind.config.mjs` syntax and ensure `hsl(var(--variable-name))` format is used correctly. Inspect applied styles in dev tools.

## Detailed Build Steps

1.  **Define Color Palette:**
    - Collaborate with design or use brand guidelines to select distinct and vibrant primary, secondary, and accent colors.
    - Choose appropriate foreground colors (e.g., `--primary-foreground`) for each background color to ensure readability.
    - Define light and dark mode variants for _all_ semantic color roles used by the application and Shadcn UI (background, foreground, primary, secondary, accent, destructive, muted, border, input, ring, card, popover).
    - Represent colors using HSL or Oklch values.
2.  **Verify Accessibility & Finalize Values:**
    - For every relevant text/background and UI element/background color pair (e.g., `primary` background with `primary-foreground` text, `input` background with `foreground` text, `border` on `background`), use a contrast checking tool (e.g., WebAIM Contrast Checker, browser dev tools) to ensure WCAG AA standards are met (4.5:1 for normal text, 3:1 for large text/UI components).
    - Adjust HSL/Oklch lightness/chroma values as needed, balancing vibrancy with accessibility. Document the final, verified values.
3.  **Update `globals.css`:**
    - Replace the existing HSL/Oklch values for all relevant CSS variables within the `:root` (light mode) and `.dark` scopes with the new, verified values.
    - Ensure variable names (`--primary`, `--background`, etc.) remain consistent with Shadcn UI expectations. Add comments explaining the role of each color variable.
4.  **Verify `tailwind.config.mjs`:**
    - Review the `theme.extend.colors` section.
    - Confirm that all semantic color keys (e.g., `primary`, `secondary`, `card`) correctly reference the CSS variables using the `hsl(var(--variable-name))` syntax.
    - Ensure foreground variants are also correctly mapped (e.g., `primary: { DEFAULT: 'hsl(var(--primary))', foreground: 'hsl(var(--primary-foreground))' }`).
5.  **Audit & Refactor Component Color Usage:**
    - Perform a codebase search (grep) for hardcoded color values (hex codes, rgb, direct `text-red-500`, etc.) within components (`.tsx` files).
    - Refactor any found instances to use the appropriate semantic Tailwind utility classes (e.g., `bg-primary`, `text-destructive-foreground`, `border-border`). Justify any exceptions with comments.
6.  **Build & Run Locally:**
    - Run `pnpm build` to ensure Tailwind configuration is valid and CSS generates correctly.
    - Run `pnpm dev` to start the development server.
7.  **Manual Visual Testing:**
    - Thoroughly navigate all pages, sections, and interactive component states (hover, focus, active, disabled) of the website.
    - Test in both light and dark modes using the theme toggle.
    - Verify using multiple browsers (Chrome, Firefox, Safari) and responsive viewport sizes.
    - Use browser developer tools to inspect computed styles and confirm they trace back to the intended CSS variables.
8.  **Run Automated Checks:**
    - Execute the full test suite (`pnpm test`) to catch any functional regressions.
    - Run linting (`pnpm lint`) and formatting (`pnpm format`).
    - If configured, run automated accessibility checks (e.g., Axe integration in tests or browser extension) focusing on color contrast.
9.  **Document Palette:**
    - Create `docs/colors.md`.
    - Document the semantic roles (primary, accent, etc.), their intended use, the final HSL/Oklch values for light/dark modes, and confirmation of WCAG AA contrast compliance for key pairings. Include visual swatches if possible.
10. **Commit & Code Review:**
    - Commit changes using Conventional Commits (`feat(ui): implement distinct brand color scheme`).
    - Create a Pull Request, clearly outlining the changes and linking to the task description and `docs/colors.md`. Highlight areas requiring careful review (contrast ratios, component refactoring).

## Testing Strategy

- **Unit Tests:** Existing component tests will be run. They primarily validate structure and props, not visual appearance. Failures would indicate unexpected side effects of config changes (low risk). No new unit tests are required specifically for colors.
- **Integration Tests:** Existing tests verifying component composition will run. Useful for catching gross rendering errors but not subtle color issues.
- **Manual/Visual Testing (Primary):** This is the most critical layer. Requires meticulous inspection of all UI elements across pages, states, modes, and browsers to confirm correct color application, visual harmony, and readability.
- **Automated Accessibility Tests:** Configure and run tools like Axe (via browser extension, Storybook addon, or Playwright/Cypress integration if available) specifically targeting color contrast violations (WCAG AA). This provides a crucial safety net against regressions.
- **What to Mock:** No new mocking needed. Existing mocks for external dependencies remain valid.
- **Coverage Targets:** Maintain existing code coverage targets. CSS and config files are not typically measured, but running tests ensures related code logic wasn't broken.
- **Edge-Case Notes:** Pay special attention during manual testing to: disabled states, focus rings, destructive action confirmation dialogues, subtle background/border contrasts, text on gradient/image backgrounds, and elements using opacity with semantic colors (e.g., `bg-primary/80`).

## Logging & Observability

- No runtime logging changes required for implementing a static color scheme.

## Security & Config

- **Input Validation Hotspots:** Not applicable. Color definitions are static configuration.
- **Secrets Handling:** Not applicable. No secrets involved.
- **Least‑Privilege Notes:** Not applicable.
- **Accessibility Compliance:** This is a core requirement. Mitigation is built into the definition (Step 1/2), verification (Step 7/8), and documentation (Step 9) processes, focusing on WCAG AA contrast ratios.

## Documentation

- **Code Self-Doc Patterns:**
  - Semantic CSS variable names (`--primary`, not `--blue-500`).
  - Semantic Tailwind color keys (`primary`, not `brandBlue`).
  - Inline comments in `globals.css` explaining the role of each color variable.
  - Comments in `tailwind.config.mjs` clarifying the mapping if necessary.
- **Required Readme or OpenAPI Updates:**
  - Update the main `README.md` to mention the new brand color scheme and link to `docs/colors.md`.
  - Create `docs/colors.md` as described in Build Steps.

## Risk Matrix

| Risk                                         | Severity | Mitigation                                                                                                                                  |
| :------------------------------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------ |
| **Inaccessible Color Contrast**              | critical | Mandatory contrast validation (WCAG AA) during definition (Step 2). Automated checks (Axe) during testing (Step 8). Thorough manual review. |
| Inconsistent Color Application / Visual Bugs | high     | Thorough manual visual testing across modes/browsers/states (Step 7). Code audit for hardcoded colors (Step 5). DevTools inspection.        |
| Breaking Shadcn UI Component Styles          | medium   | Maintain established CSS variable names (`--primary`, etc.). Verify components visually post-change. Debug CSS if necessary.                |
| Poor Readability Despite Contrast Pass       | medium   | Subjective visual review during manual testing (Step 7). Consider font weights and sizes alongside color. Get peer feedback during review.  |
| Incorrect CSS Variable/Tailwind Mapping      | low      | Careful review of `globals.css` and `tailwind.config.mjs`. Inspect computed styles in DevTools. Build process will catch syntax errors.     |
| Documentation (`docs/colors.md`) Out of Sync | low      | Make documentation update part of the Definition of Done (Step 9). Review docs alongside code changes.                                      |

## Open Questions

- Q1: Are the specific HSL/Oklch values for the new palette already defined by Design, or does Development need to propose them based on "distinct and vibrant"? (Plan assumes Development proposes and validates against accessibility).
- Q2: Are there any third-party components embedded that _don't_ use Tailwind/CSS variables and will require separate theming?
- Q3: What is the definitive tool/standard for contrast validation (e.g., specific WCAG version, required ratio checker)? (Plan assumes WCAG 2.1 AA).

```

```
